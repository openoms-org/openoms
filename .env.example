# OpenOMS — Environment variables
# Copy to .env and adjust values for your environment.
#
# For production: generate secure random values for all secrets.
#   JWT_SECRET:     openssl rand -base64 64
#   ENCRYPTION_KEY: openssl rand -hex 32
#   POSTGRES_PASSWORD / POSTGRES_APP_PASSWORD: openssl rand -base64 32

# ── Application ──────────────────────────────────────────────────
PORT=8080
ENV=development                          # development | production
BASE_URL=http://localhost:8080
FRONTEND_URL=http://localhost:3000

# ── Database ─────────────────────────────────────────────────────
# The app connects as openoms_app (RLS-enforced role).
DATABASE_URL=postgres://openoms_app:openoms-dev-password@localhost:5433/openoms?sslmode=disable

# For docker-compose.prod.yml — Postgres superuser password
POSTGRES_PASSWORD=openoms_dev
# For docker-compose.prod.yml — App role password (created by migration 000001)
POSTGRES_APP_PASSWORD=openoms_app_dev

# ── Redis ────────────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379

# ── Auth / Security ──────────────────────────────────────────────
# JWT signing secret (min 64 chars, change in production!)
JWT_SECRET=dev-jwt-secret-change-me-in-production-must-be-64-chars-minimum-xxxxxx
# AES-256 encryption key for integration credentials (64-char hex = 32 bytes)
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# ── File Upload ──────────────────────────────────────────────────
UPLOAD_DIR=./uploads
MAX_UPLOAD_SIZE=10485760                 # 10 MB

# ── S3-compatible Object Storage (optional) ──────────────────────
# Set S3_ENABLED=true to use S3 instead of local file storage.
S3_ENABLED=false
S3_BUCKET=openoms-uploads
S3_REGION=eu-central-1
S3_ENDPOINT=                             # Leave empty for AWS, or set for MinIO/DO Spaces
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_PUBLIC_URL=                           # CDN URL prefix for public access

# ── Frontend (Next.js) ──────────────────────────────────────────
NEXT_PUBLIC_API_URL=http://localhost:8080

# ── Docker port overrides (optional) ─────────────────────────────
# API_PORT=8080
# DASHBOARD_PORT=3000

# ── Workers ────────────────────────────────────────────────────
WORKERS_ENABLED=true                     # Background workers (OAuth refresh, order polling, etc.)

# ── Allegro Integration ──────────────────────────────────────────
ALLEGRO_CLIENT_ID=
ALLEGRO_CLIENT_SECRET=
ALLEGRO_REDIRECT_URI=http://localhost:8080/api/v1/integrations/allegro/callback
ALLEGRO_WEBHOOK_SECRET=

# ── InPost Integration ───────────────────────────────────────────
INPOST_API_TOKEN=
INPOST_ORGANIZATION_ID=
INPOST_WEBHOOK_SECRET=
# Public GeoWidget token from manager.paczkomaty.pl (MY ACCOUNT > API > GEOWIDGET)
INPOST_GEOWIDGET_TOKEN=
NEXT_PUBLIC_INPOST_GEOWIDGET_TOKEN=

# ── AI / OpenAI (optional) ──────────────────────────────────────
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# ── Feature Flags ────────────────────────────────────────────────
FEATURE_ALLEGRO=true
FEATURE_INPOST=true
